---
title: Slut på identifiering av lager med Azure och Azure Stack Edge
description: Lär dig hur du använder Azure och Azure Stack Edge-tjänster för att genomföra bristande lager identifiering.
author: BryanLa
ms.topic: article
ms.date: 11/05/2019
ms.author: bryanla
ms.reviewer: anajod
ms.lastreviewed: 11/05/2019
ms.openlocfilehash: 865f63bc4234e50ed169aa29cefdb1886750594c
ms.sourcegitcommit: bb3e40b210f86173568a47ba18c3cc50d4a40607
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 06/17/2020
ms.locfileid: "84911988"
---
# <a name="out-of-stock-detection-at-the-edge-pattern"></a><span data-ttu-id="8300c-103">Slut på lager identifiering i gräns mönstret</span><span class="sxs-lookup"><span data-stu-id="8300c-103">Out of stock detection at the edge pattern</span></span>

<span data-ttu-id="8300c-104">Det här mönstret illustrerar hur du avgör om hyllorna har slut på lager objekt med hjälp av en Azure Stack Edge-eller Azure IoT Edge enhets-och nätverks kameror.</span><span class="sxs-lookup"><span data-stu-id="8300c-104">This pattern illustrates how to determine if shelves have out of stock items using an Azure Stack Edge or Azure IoT Edge device and network cameras.</span></span>

## <a name="context-and-problem"></a><span data-ttu-id="8300c-105">Kontext och problem</span><span class="sxs-lookup"><span data-stu-id="8300c-105">Context and problem</span></span>

<span data-ttu-id="8300c-106">Fysiska detalj handels butiker förlorar försäljning eftersom när kunderna söker efter ett objekt, finns det inte på hyllan.</span><span class="sxs-lookup"><span data-stu-id="8300c-106">Physical retail stores lose sales because when customers look for an item, it's not present on the shelf.</span></span> <span data-ttu-id="8300c-107">Objektet kan dock ha varit på bak sidan av butiken och inte bearbetas igen.</span><span class="sxs-lookup"><span data-stu-id="8300c-107">However, the item could have been in the back of the store and not been restocked.</span></span> <span data-ttu-id="8300c-108">Butiker vill använda sin personal mer effektivt och få automatiskt meddelanden när objekt behöver återskapas.</span><span class="sxs-lookup"><span data-stu-id="8300c-108">Stores would like to use their staff more efficiently and get automatically notified when items need restocking.</span></span>

## <a name="solution"></a><span data-ttu-id="8300c-109">Lösning</span><span class="sxs-lookup"><span data-stu-id="8300c-109">Solution</span></span>

<span data-ttu-id="8300c-110">I lösnings exemplet används en gräns enhet, till exempel en Azure Stack Edge i varje butik, som effektivt bearbetar data från kameror i butiken.</span><span class="sxs-lookup"><span data-stu-id="8300c-110">The solution example uses an edge device, like an Azure Stack Edge in each store, which efficiently processes data from cameras in the store.</span></span> <span data-ttu-id="8300c-111">I den här optimerade designen kan butiker endast skicka relevanta händelser och avbildningar till molnet.</span><span class="sxs-lookup"><span data-stu-id="8300c-111">This optimized design lets stores send only relevant events and images to the cloud.</span></span> <span data-ttu-id="8300c-112">Designen sparar bandbredd, lagrings utrymme och säkerställer kund sekretess.</span><span class="sxs-lookup"><span data-stu-id="8300c-112">The design saves bandwidth, storage space, and ensures customer privacy.</span></span> <span data-ttu-id="8300c-113">När bild rutor läses från varje kamera, bearbetar en ML-modell avbildningen och returnerar eventuella inaktuella lager områden.</span><span class="sxs-lookup"><span data-stu-id="8300c-113">As frames are read from each camera, an ML model processes the image and returns any out of stock areas.</span></span> <span data-ttu-id="8300c-114">Bilden och antalet lager områden visas i en lokal webbapp.</span><span class="sxs-lookup"><span data-stu-id="8300c-114">The image and out of stock areas are displayed on a local web app.</span></span> <span data-ttu-id="8300c-115">Dessa data kan skickas till en insikts miljö i Time Series som visar insikter i Power BI.</span><span class="sxs-lookup"><span data-stu-id="8300c-115">This data can be sent to a Time Series Insight environment to show insights in Power BI.</span></span>

![Brist på aktie lösnings arkitektur](media/pattern-out-of-stock-at-edge/solution-architecture.png)

<span data-ttu-id="8300c-117">Så här fungerar lösningen:</span><span class="sxs-lookup"><span data-stu-id="8300c-117">Here's how the solution works:</span></span>

1. <span data-ttu-id="8300c-118">Avbildningar samlas in från en nätverks kamera över HTTP eller RTSP.</span><span class="sxs-lookup"><span data-stu-id="8300c-118">Images are captured from a network camera over HTTP or RTSP.</span></span>
2. <span data-ttu-id="8300c-119">Bilden ändrar storlek och skickas till driv rutins driv rutinen, som kommunicerar med ML-modellen för att avgöra om det finns några lager bilder.</span><span class="sxs-lookup"><span data-stu-id="8300c-119">The image is resized and sent to the inference driver, which communicates with the ML model to determine if there are any out of stock images.</span></span>
3. <span data-ttu-id="8300c-120">ML-modellen returnerar eventuella inaktuella lager områden.</span><span class="sxs-lookup"><span data-stu-id="8300c-120">The ML model returns any out of stock areas.</span></span>
4. <span data-ttu-id="8300c-121">Inferencing-drivrutinen laddar upp RAW-avbildningen till en BLOB (om den anges) och skickar resultatet från modellen till Azure IoT Hub och en processor för en markerings ram på enheten.</span><span class="sxs-lookup"><span data-stu-id="8300c-121">The inferencing driver uploads the raw image to a blob (if specified), and sends the results from the model to Azure IoT Hub and a bounding box processor on the device.</span></span>
5. <span data-ttu-id="8300c-122">Processorns markerings ram lägger till avgränsnings rutor i avbildningen och cachelagrar avbildnings Sök vägen i en minnes intern databas.</span><span class="sxs-lookup"><span data-stu-id="8300c-122">The bounding box processor adds bounding boxes to the image and caches the image path in an in-memory database.</span></span>
6. <span data-ttu-id="8300c-123">Webbappen frågar efter bilder och visar dem i den ordning som har tagits emot.</span><span class="sxs-lookup"><span data-stu-id="8300c-123">The web app queries for images and shows them in the order received.</span></span>
7. <span data-ttu-id="8300c-124">Meddelanden från IoT Hub sammanställs i Time Series Insights.</span><span class="sxs-lookup"><span data-stu-id="8300c-124">Messages from IoT Hub are aggregated in Time Series Insights.</span></span>
8. <span data-ttu-id="8300c-125">Power BI visar en interaktiv rapport över färdiga lager objekt över tid med data från Time Series Insights.</span><span class="sxs-lookup"><span data-stu-id="8300c-125">Power BI displays an interactive report of out of stock items over time with the data from Time Series Insights.</span></span>


## <a name="components"></a><span data-ttu-id="8300c-126">Komponenter</span><span class="sxs-lookup"><span data-stu-id="8300c-126">Components</span></span>

<span data-ttu-id="8300c-127">Den här lösningen använder följande komponenter:</span><span class="sxs-lookup"><span data-stu-id="8300c-127">This solution uses the following components:</span></span>

| <span data-ttu-id="8300c-128">Lager</span><span class="sxs-lookup"><span data-stu-id="8300c-128">Layer</span></span> | <span data-ttu-id="8300c-129">Komponent</span><span class="sxs-lookup"><span data-stu-id="8300c-129">Component</span></span> | <span data-ttu-id="8300c-130">Description</span><span class="sxs-lookup"><span data-stu-id="8300c-130">Description</span></span> |
|----------|-----------|-------------|
| <span data-ttu-id="8300c-131">Lokal maskin vara</span><span class="sxs-lookup"><span data-stu-id="8300c-131">On-premises hardware</span></span> | <span data-ttu-id="8300c-132">Nätverks kamera</span><span class="sxs-lookup"><span data-stu-id="8300c-132">Network camera</span></span> | <span data-ttu-id="8300c-133">En nätverks kamera krävs, med antingen ett HTTP-eller RTSP-flöde för att tillhandahålla avbildningar för härledning.</span><span class="sxs-lookup"><span data-stu-id="8300c-133">A network camera is required, with either an HTTP or RTSP feed to provide the images for inference.</span></span> |
| <span data-ttu-id="8300c-134">Azure</span><span class="sxs-lookup"><span data-stu-id="8300c-134">Azure</span></span> | <span data-ttu-id="8300c-135">Azure IoT Hub</span><span class="sxs-lookup"><span data-stu-id="8300c-135">Azure IoT Hub</span></span> | <span data-ttu-id="8300c-136">[Azure IoT Hub](/azure/iot-hub/) hanterar enhets etablering och meddelanden för gräns enheterna.</span><span class="sxs-lookup"><span data-stu-id="8300c-136">[Azure IoT Hub](/azure/iot-hub/) handles device provisioning and messaging for the edge devices.</span></span> |
|  | <span data-ttu-id="8300c-137">Azure Time Series Insights</span><span class="sxs-lookup"><span data-stu-id="8300c-137">Azure Time Series Insights</span></span> | <span data-ttu-id="8300c-138">[Azure Time Series Insights](/azure/time-series-insights/) lagrar meddelanden från IoT Hub för visualisering.</span><span class="sxs-lookup"><span data-stu-id="8300c-138">[Azure Time Series Insights](/azure/time-series-insights/) stores the messages from IoT Hub for visualization.</span></span> |
|  | <span data-ttu-id="8300c-139">Power BI</span><span class="sxs-lookup"><span data-stu-id="8300c-139">Power BI</span></span> | <span data-ttu-id="8300c-140">[Microsoft Power BI](https://powerbi.microsoft.com/) ger affärs fokuserade rapporter om brist på aktie händelser.</span><span class="sxs-lookup"><span data-stu-id="8300c-140">[Microsoft Power BI](https://powerbi.microsoft.com/) provides business-focused reports of out of stock events.</span></span> <span data-ttu-id="8300c-141">Power BI tillhandahåller ett lättanvänt instrument panels gränssnitt för visning av utdata från Azure Stream Analytics.</span><span class="sxs-lookup"><span data-stu-id="8300c-141">Power BI provides an easy-to-use dashboard interface for viewing the output from Azure Stream Analytics.</span></span> |
| <span data-ttu-id="8300c-142">Azure Stack Edge eller</span><span class="sxs-lookup"><span data-stu-id="8300c-142">Azure Stack Edge or</span></span><br><span data-ttu-id="8300c-143">Azure IoT Edge enhet</span><span class="sxs-lookup"><span data-stu-id="8300c-143">Azure IoT Edge device</span></span> | <span data-ttu-id="8300c-144">Azure IoT Edge</span><span class="sxs-lookup"><span data-stu-id="8300c-144">Azure IoT Edge</span></span> | <span data-ttu-id="8300c-145">[Azure IoT Edge](/azure/iot-edge/) dirigerar körningen för de lokala behållarna och hanterar enhets hantering och uppdateringar.</span><span class="sxs-lookup"><span data-stu-id="8300c-145">[Azure IoT Edge](/azure/iot-edge/) orchestrates the runtime for the on-premises containers and handles device management and updates.</span></span>|
| | <span data-ttu-id="8300c-146">Azure Project-Brainwave</span><span class="sxs-lookup"><span data-stu-id="8300c-146">Azure project brainwave</span></span> | <span data-ttu-id="8300c-147">På en Azure Stack Edge-enhet använder [Project Brainwave](https://blogs.microsoft.com/ai/build-2018-project-brainwave/) FPGAs (Field-programmerbara grind mat ris) för att påskynda ml inferencing.</span><span class="sxs-lookup"><span data-stu-id="8300c-147">On an Azure Stack Edge device, [Project Brainwave](https://blogs.microsoft.com/ai/build-2018-project-brainwave/) uses Field-Programmable Gate Arrays (FPGAs) to accelerate ML inferencing.</span></span>|

## <a name="issues-and-considerations"></a><span data-ttu-id="8300c-148">Problem och överväganden</span><span class="sxs-lookup"><span data-stu-id="8300c-148">Issues and considerations</span></span>

<span data-ttu-id="8300c-149">Tänk på följande när du bestämmer hur du ska implementera den här lösningen:</span><span class="sxs-lookup"><span data-stu-id="8300c-149">Consider the following points when deciding how to implement this solution:</span></span>

### <a name="scalability"></a><span data-ttu-id="8300c-150">Skalbarhet</span><span class="sxs-lookup"><span data-stu-id="8300c-150">Scalability</span></span>

<span data-ttu-id="8300c-151">De flesta Machine Learning-modeller kan bara köras med ett visst antal bild rutor per sekund, beroende på vilken maskin vara som tillhandahålls.</span><span class="sxs-lookup"><span data-stu-id="8300c-151">Most machine learning models can only run at a certain number of frames per second, depending on the provided hardware.</span></span> <span data-ttu-id="8300c-152">Fastställ den optimala samplings frekvensen från dina kamera (er) för att säkerställa att den ML pipelinen inte säkerhets kopie ras.</span><span class="sxs-lookup"><span data-stu-id="8300c-152">Determine the optimal sample rate from your camera(s) to ensure that the ML pipeline doesn't back up.</span></span> <span data-ttu-id="8300c-153">Olika typer av maskin vara kommer att hantera olika antal kameror och bild hastigheter.</span><span class="sxs-lookup"><span data-stu-id="8300c-153">Different types of hardware will handle different numbers of cameras and frame rates.</span></span>

### <a name="availability"></a><span data-ttu-id="8300c-154">Tillgänglighet</span><span class="sxs-lookup"><span data-stu-id="8300c-154">Availability</span></span>

<span data-ttu-id="8300c-155">Det är viktigt att tänka på vad som kan hända om gräns enheten förlorar anslutningen.</span><span class="sxs-lookup"><span data-stu-id="8300c-155">It's important to consider what might happen if the edge device loses connectivity.</span></span> <span data-ttu-id="8300c-156">Överväg vilka data som kan gå förlorade från Time Series Insights och Power BI instrument panelen.</span><span class="sxs-lookup"><span data-stu-id="8300c-156">Consider what data might be lost from the Time Series Insights and Power BI dashboard.</span></span> <span data-ttu-id="8300c-157">Exempel lösningen som anges har inte utformats för hög tillgänglighet.</span><span class="sxs-lookup"><span data-stu-id="8300c-157">The example solution as provided isn't designed to be highly available.</span></span>

### <a name="manageability"></a><span data-ttu-id="8300c-158">Hanterbarhet</span><span class="sxs-lookup"><span data-stu-id="8300c-158">Manageability</span></span>

<span data-ttu-id="8300c-159">Den här lösningen kan omfatta många enheter och platser, vilket kan ge svårhanterligt.</span><span class="sxs-lookup"><span data-stu-id="8300c-159">This solution can span many devices and locations, which could get unwieldy.</span></span> <span data-ttu-id="8300c-160">Azures IoT-tjänster kan automatiskt placera nya platser och enheter online och hålla dem uppdaterade.</span><span class="sxs-lookup"><span data-stu-id="8300c-160">Azure's IoT services can automatically bring new locations and devices online and keep them up to date.</span></span> <span data-ttu-id="8300c-161">Lämpliga data styrnings procedurer måste också följas.</span><span class="sxs-lookup"><span data-stu-id="8300c-161">Proper data governance procedures must be followed as well.</span></span>

### <a name="security"></a><span data-ttu-id="8300c-162">Säkerhet</span><span class="sxs-lookup"><span data-stu-id="8300c-162">Security</span></span>

<span data-ttu-id="8300c-163">Det här mönstret hanterar potentiellt känsliga data.</span><span class="sxs-lookup"><span data-stu-id="8300c-163">This pattern handles potentially sensitive data.</span></span> <span data-ttu-id="8300c-164">Se till att nycklarna roteras regelbundet och att behörigheterna för Azure Storage konto och lokala resurser är korrekt inställda.</span><span class="sxs-lookup"><span data-stu-id="8300c-164">Make sure keys are regularly rotated and the permissions on the Azure Storage Account and local shares are correctly set.</span></span>

## <a name="next-steps"></a><span data-ttu-id="8300c-165">Nästa steg</span><span class="sxs-lookup"><span data-stu-id="8300c-165">Next steps</span></span>

<span data-ttu-id="8300c-166">Mer information om ämnen som introduceras i den här artikeln:</span><span class="sxs-lookup"><span data-stu-id="8300c-166">To learn more about topics introduced in this article:</span></span>
- <span data-ttu-id="8300c-167">Flera IoT-relaterade tjänster används i det här mönstret, inklusive [Azure IoT Edge](/azure/iot-edge/), [Azure IoT Hub](/azure/iot-hub/)och [Azure Time Series Insights](/azure/time-series-insights/).</span><span class="sxs-lookup"><span data-stu-id="8300c-167">Multiple IoT related services are used in this pattern, including [Azure IoT Edge](/azure/iot-edge/), [Azure IoT Hub](/azure/iot-hub/), and [Azure Time Series Insights](/azure/time-series-insights/).</span></span>
- <span data-ttu-id="8300c-168">Läs mer om Microsoft Project Brainwave i [blogg meddelandet](https://blogs.microsoft.com/ai/build-2018-project-brainwave/) och kolla in [Azure accelererade Machine Learning med Project Brainwave video](https://www.youtube.com/watch?v=DJfMobMjCX0).</span><span class="sxs-lookup"><span data-stu-id="8300c-168">To learn more about Microsoft Project Brainwave, see [the blog announcement](https://blogs.microsoft.com/ai/build-2018-project-brainwave/) and checkout out the [Azure Accelerated Machine Learning with Project Brainwave video](https://www.youtube.com/watch?v=DJfMobMjCX0).</span></span>
- <span data-ttu-id="8300c-169">I [design överväganden för Hybrid appar](overview-app-design-considerations.md) kan du läsa mer om metod tips och få svar på ytterligare frågor.</span><span class="sxs-lookup"><span data-stu-id="8300c-169">See [Hybrid app design considerations](overview-app-design-considerations.md) to learn more about best practices and to get answers to any additional questions.</span></span>
- <span data-ttu-id="8300c-170">Se [Azure Stacks familj med produkter och lösningar](/azure-stack) för att lära dig mer om hela portföljen med produkter och lösningar.</span><span class="sxs-lookup"><span data-stu-id="8300c-170">See the [Azure Stack family of products and solutions](/azure-stack) to learn more about the entire portfolio of products and solutions.</span></span>

<span data-ttu-id="8300c-171">När du är redo att testa lösnings exemplet kan du fortsätta med [distributions guiden för analys av lösningar](https://aka.ms/edgeinferencingdeploy).</span><span class="sxs-lookup"><span data-stu-id="8300c-171">When you're ready to test the solution example, continue with the [Tiered data for analytics solution deployment guide](https://aka.ms/edgeinferencingdeploy).</span></span> <span data-ttu-id="8300c-172">Distributions guiden innehåller steg-för-steg-instruktioner för att distribuera och testa dess komponenter.</span><span class="sxs-lookup"><span data-stu-id="8300c-172">The deployment guide provides step-by-step instructions for deploying and testing its components.</span></span>
